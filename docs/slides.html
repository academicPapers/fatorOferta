<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Fator Oferta</title>
    <meta charset="utf-8" />
    <meta name="author" content="Luiz Fernando Palin Droubi" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/metropolis.css" rel="stylesheet" />
    <link href="libs/remark-css/metropolis-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Fator Oferta
## Contextualização, Conceitos e Paradigmas, Estado da Arte e Aplicações
### Luiz Fernando Palin Droubi
### Diretor Técnico da SOBREA
### 15 de junho de 2021

---






class: inverse, center, middle

# Contextualização

---
# Contextualização

* Dados de transação:

--
  - Proxy para o valor de mercado
  
--

  - **Se** tratarem-se de *arms' lenght transactions*
  
--

  - Transações com valores muito discrepantes podem ser de vendas ocorridas em situações diferentes das que caracterizam as *arm's lenght transactions*

--

* Dados de oferta:

--

  - Proxy para o valor de mercado
  
--

  - **Se** os anúncios forem *validados*
  
--

  - Necessidade de um passo a mais: a qual distância do valor de mercado 
  encontram-se os dados de oferta?

---
class: inverse, center, middle

# Conceitos e Paradigmas

---
# Conceitos e Paradigmas

* Preços de mercado vs. Valor de Mercado (**VM**)

--

* Definições neoclássicas do **VM**:

--

  - Market price is the amount actually paid in a particular transaction, while market value is a hypothetical or estimated sale price that would result from careful consideration by the buyer and seller of all data, with primary reliance 
on those data that reflect the actions of responsible, prudent buyers and 
sellers under conditions of a fair sale (Spinney, 2010). 

--

  - IVSC: the estimated amount for which a property should exchange on the date 
of valuation between a willing buyer and a willing seller **in an arm’s length transaction** after proper marketing wherein the parties had each acted 
knowledgeably, prudently and without compulsion (French, 2006, p. 87).

--

  - Valor de mercado é a quantia mais provável pela qual se negociaria voluntariamente e conscientemente um bem, em uma data de referência, dentro das condições do mercado vigente (NBR 14653-01/2019).
  
---
# Conceitos e Paradigmas

* Crítica das definições de **VM** a partir da teoria dos custos de transação:
  
--

  - most of the literature on the property market is written as though it was the very paradigm of a neo-classical perfect market—many buyers, many sellers, homogeneous product, full information etc (Evans, 1995, p. 6; also see 
comment by Watkins, 1998, p. 57).

--
  
  - actors in real-life markets are faced with positive transaction costs, 
  mainly arising from incomplete information.

--

  - once transaction costs are introduced, the acquisition of unlimited 
  knowledge becomes too expensive or impossible.
  
--

* Em um extremo, tem-se a condição de mercado perfeito, e num outro extremo, 
tem-se a condição de mercado inexistente. Entre as duas situações, partindo do
extremo de mercado inexistente, à medida que os custos transacionais diminuem,
ruma-se para a condição de mercado perfeito, onde existem muitos compradores,
muitos vendedores e informação perfeita, *i.e.* os custos transacionais são
iguais a zero.

--

  - It would seem therefore that valuation theory is faced with the simultaneity 
problem akin to that of quantum physics where, in this case, market value cannot exist simultaneously with the need for valuation. Valuers are required when transaction costs are high but at this point market value does not exist. 
Conversely, valuers are not required when transaction costs are zero and market value has emerged.

---
background-image: url(https://news.berkeley.edu/wp-content/uploads/2014/07/cats300.jpg)
background-size: contain

# O gato de Schrodinger

---
class: inverse, center, middle

# Estado da arte

---
class: inverse, center, middle

# Aplicações

---
# Modelo de regressão na forma direta 


`$$VU = (1 - 0,15.Fonte)(3000 - 0,25.Area + \varepsilon)$$`


```r
R 4.0.2&gt; set.seed(2)
R 4.0.2&gt; area &lt;- runif(100, min = 250, max = 10000)
R 4.0.2&gt; venda &lt;- rbinom(100, 1, .5)
R 4.0.2&gt; vu &lt;- (1-.15*venda)*(3000 - .25*area + rnorm(100, 0, 150))
R 4.0.2&gt; dados &lt;- data.frame(VU = vu, Area = area, 
                  Fonte = factor(venda, 
                                 labels = c("Oferta", "Venda")))
```

---
# Análise Exploratória

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="images/dados1-1.svg" alt="Dados randômicos de oferta (em vermelho) e transação (em verde)"  /&gt;
&lt;p class="caption"&gt;Dados randômicos de oferta (em vermelho) e transação (em verde)&lt;/p&gt;
&lt;/div&gt;

---
# Modelo mal especificado

.pull-left[


```r
R 4.0.2&gt; fit &lt;- lm(VU ~ Area + Fonte, data = dados)
R 4.0.2&gt; summary(fit)
```

```
## 
## Call:
## lm(formula = VU ~ Area + Fonte, data = dados)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -284.11 -133.96   -5.26  107.93  344.03 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  2.915e+03  3.349e+01  87.037  &lt; 2e-16 ***
## Area        -2.336e-01  5.224e-03 -44.724  &lt; 2e-16 ***
## FonteVenda  -2.479e+02  3.036e+01  -8.168 1.18e-12 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 151.3 on 97 degrees of freedom
## Multiple R-squared:  0.9551,	Adjusted R-squared:  0.9542 
## F-statistic:  1032 on 2 and 97 DF,  p-value: &lt; 2.2e-16
```

]

.pull-right[


```
## 
## 	studentized Breusch-Pagan test
## 
## data:  fit
## BP = 6.4355, df = 2, p-value = 0.04005
```

&lt;img src="images/unnamed-chunk-3-1.svg" style="display: block; margin: auto;" /&gt;

]


---
# Modelo mal especificado

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="images/dados1a-1.svg" alt="Dados randômicos de oferta (em vermelho) e transação (em verde)"  /&gt;
&lt;p class="caption"&gt;Dados randômicos de oferta (em vermelho) e transação (em verde)&lt;/p&gt;
&lt;/div&gt;

---
# Modelo bem especificado

.pull-left[


```r
R 4.0.2&gt; fit1 &lt;- lm(VU ~ Area*Fonte, data = dados)
R 4.0.2&gt; summary(fit1)
```

```
## 
## Call:
## lm(formula = VU ~ Area * Fonte, data = dados)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -277.58 -111.34   19.66   97.02  323.54 
## 
## Coefficients:
##                   Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)      3.011e+03  3.766e+01  79.961  &lt; 2e-16 ***
## Area            -2.527e-01  6.445e-03 -39.204  &lt; 2e-16 ***
## FonteVenda      -4.621e+02  5.594e+01  -8.260 7.99e-13 ***
## Area:FonteVenda  4.248e-02  9.628e-03   4.412 2.68e-05 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 138.7 on 96 degrees of freedom
## Multiple R-squared:  0.9627,	Adjusted R-squared:  0.9615 
## F-statistic: 825.3 on 3 and 96 DF,  p-value: &lt; 2.2e-16
```
]

.pull-right[


```
## 
## 	studentized Breusch-Pagan test
## 
## data:  fit1
## BP = 3.9476, df = 3, p-value = 0.2672
```

&lt;img src="images/unnamed-chunk-5-1.svg" style="display: block; margin: auto;" /&gt;

]

---
# Opção: aplicação prévia do fator oferta

.pull-left[


```r
R 4.0.2&gt; dados &lt;- within(dados, 
                 VUhom &lt;- ifelse(Fonte == "Venda", 
                                 VU, .85*VU))
```

* Coeficiente de variação dos dados crus:


```r
R 4.0.2&gt; sd(dados$VU)/mean(dados$VU)
```

```
## [1] 0.4356105
```

* Coeficiente de variação dos dados homogeneizados:


```r
R 4.0.2&gt; sd(dados$VUhom)/mean(dados$VUhom)
```

```
## [1] 0.4263126
```

]

.pull-right[

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="images/dadosHomogeneizados-1.svg" alt="Dados homogeneizados."  /&gt;
&lt;p class="caption"&gt;Dados homogeneizados.&lt;/p&gt;
&lt;/div&gt;

]

---
# Opção: aplicação prévia do fator oferta

* Modelo:


```r
R 4.0.2&gt; fithom &lt;- lm(VUhom ~ Area, dados)
R 4.0.2&gt; summary(fithom)
```

```
## 
## Call:
## lm(formula = VUhom ~ Area, data = dados)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -271.45 -105.53   11.75   92.98  265.71 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 2554.91700   25.35580  100.76   &lt;2e-16 ***
## Area          -0.21274    0.00436  -48.79   &lt;2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 126.3 on 98 degrees of freedom
## Multiple R-squared:  0.9605,	Adjusted R-squared:  0.9601 
## F-statistic:  2381 on 1 and 98 DF,  p-value: &lt; 2.2e-16
```


---
# Resumo



&lt;table style="border-collapse:collapse; border:none;"&gt;
&lt;tr&gt;
&lt;th style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm;  text-align:left; "&gt;&amp;nbsp;&lt;/th&gt;
&lt;th colspan="3" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; "&gt;VU&lt;/th&gt;
&lt;th colspan="3" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; "&gt;VU&lt;/th&gt;
&lt;th colspan="3" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; "&gt;VUhom&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  text-align:left; "&gt;Predictors&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  "&gt;Estimates&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  "&gt;CI&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  "&gt;p&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  "&gt;Estimates&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  "&gt;CI&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  col7"&gt;p&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  col8"&gt;Estimates&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  col9"&gt;CI&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  0"&gt;p&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; "&gt;(Intercept)&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;2914.83&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;2848.36&amp;nbsp;&amp;ndash;&amp;nbsp;2981.29&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&lt;strong&gt;&amp;lt;0.001&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;3011.07&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;2936.32&amp;nbsp;&amp;ndash;&amp;nbsp;3085.82&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7"&gt;&lt;strong&gt;&amp;lt;0.001&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col8"&gt;2554.92&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col9"&gt;2504.60&amp;nbsp;&amp;ndash;&amp;nbsp;2605.23&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  0"&gt;&lt;strong&gt;&amp;lt;0.001&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; "&gt;Area&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;0.23&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;0.24&amp;nbsp;&amp;ndash;&amp;nbsp;-0.22&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&lt;strong&gt;&amp;lt;0.001&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;0.25&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;0.27&amp;nbsp;&amp;ndash;&amp;nbsp;-0.24&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7"&gt;&lt;strong&gt;&amp;lt;0.001&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col8"&gt;&amp;#45;0.21&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col9"&gt;&amp;#45;0.22&amp;nbsp;&amp;ndash;&amp;nbsp;-0.20&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  0"&gt;&lt;strong&gt;&amp;lt;0.001&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; "&gt;Fonte [Venda]&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;247.95&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;308.20&amp;nbsp;&amp;ndash;&amp;nbsp;-187.70&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&lt;strong&gt;&amp;lt;0.001&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;462.07&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;573.12&amp;nbsp;&amp;ndash;&amp;nbsp;-351.03&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7"&gt;&lt;strong&gt;&amp;lt;0.001&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col8"&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col9"&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  0"&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; "&gt;Area * Fonte [Venda]&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;0.04&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;0.02&amp;nbsp;&amp;ndash;&amp;nbsp;0.06&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7"&gt;&lt;strong&gt;&amp;lt;0.001&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col8"&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col9"&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  0"&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm; border-top:1px solid;"&gt;Observations&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="3"&gt;100&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="3"&gt;100&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="3"&gt;100&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;"&gt;R&lt;sup&gt;2&lt;/sup&gt; / R&lt;sup&gt;2&lt;/sup&gt; adjusted&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="3"&gt;0.955 / 0.954&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="3"&gt;0.963 / 0.962&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="3"&gt;0.960 / 0.960&lt;/td&gt;
&lt;/tr&gt;

&lt;/table&gt;


---
# Previsão de valores

.pull-left[


```r
R 4.0.2&gt; new250 &lt;- 
   data.frame(Area = 250, Fonte = "Venda")
R 4.0.2&gt; predict(fit, newdata = new250,
         interval = "confidence", level = .80)
```

```
##       fit      lwr      upr
## 1 2608.47 2565.275 2651.666
```


```r
R 4.0.2&gt; predict(fit1, newdata = new250,
         interval = "confidence", level = .80)
```

```
##        fit      lwr      upr
## 1 2496.448 2445.056 2547.841
```


```r
R 4.0.2&gt; predict(fithom, newdata = new250,
         interval = "confidence", level = .80)
```

```
##        fit      lwr      upr
## 1 2501.733 2470.229 2533.236
```
]

.pull-right[


```r
R 4.0.2&gt; new10000 &lt;- 
   data.frame(Area = 10000, Fonte = "Venda")
R 4.0.2&gt; predict(fit, newdata = new10000,
         interval = "confidence", level = .80)
```

```
##        fit     lwr      upr
## 1 330.4401 286.261 374.6192
```


```r
R 4.0.2&gt; predict(fit1, newdata = new10000,
         interval = "confidence", level = .80)
```

```
##        fit      lwr      upr
## 1 447.0103 394.0733 499.9473
```


```r
R 4.0.2&gt; predict(fithom, newdata = new10000,
         interval = "confidence", level = .80)
```

```
##        fit      lwr      upr
## 1 427.5531 395.2578 459.8485
```

]

---
# Dados lognormais

`$$VU = \exp(7,5 - 0,25\cdot \log(Area) - 0,15\cdot Fonte + \varepsilon)$$`


```r
R 4.0.2&gt; set.seed(2)
R 4.0.2&gt; area &lt;- runif(100, min = 250, max = 5000)
R 4.0.2&gt; venda &lt;- rbinom(100, 1, .5)
R 4.0.2&gt; lvu &lt;- 7.5 - .25*log(area) - .15*venda + rnorm(100, mean = 0, sd = .05)
R 4.0.2&gt; dados &lt;- data.frame(VU = exp(lvu), Area = area, 
                  Fonte = factor(venda, labels = c("Oferta", "Venda")))
```

---
# Dados lognormais: análise exploratória

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="images/lognormalExploratoria-1.svg" alt="Análise exploratória. Dados lognormais."  /&gt;
&lt;p class="caption"&gt;Análise exploratória. Dados lognormais.&lt;/p&gt;
&lt;/div&gt;


---
# Modelo bem especificado


```r
R 4.0.2&gt; fit2 &lt;- lm(log(VU) ~ log(Area) + Fonte, data = dados)
```

&lt;img src="images/unnamed-chunk-20-1.svg" style="display: block; margin: auto;" /&gt;

---
# Modelo bem especificado

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="images/fit2Diagnostics-1.svg" alt="Modelo correto. Fator oferta. Dados lognormais." width="38%" /&gt;&lt;img src="images/fit2Diagnostics-2.svg" alt="Modelo correto. Fator oferta. Dados lognormais." width="38%" /&gt;&lt;img src="images/fit2Diagnostics-3.svg" alt="Modelo correto. Fator oferta. Dados lognormais." width="38%" /&gt;&lt;img src="images/fit2Diagnostics-4.svg" alt="Modelo correto. Fator oferta. Dados lognormais." width="38%" /&gt;
&lt;p class="caption"&gt;Modelo correto. Fator oferta. Dados lognormais.&lt;/p&gt;
&lt;/div&gt;


---
# Opção: Aplicação prévia do Fator Oferta

.pull-left[

```r
R 4.0.2&gt; dados &lt;- within(dados, 
                 VUhom &lt;- ifelse(Fonte == "Venda", 
                                 VU, .85*VU))
R 4.0.2&gt; fithom2 &lt;- lm(log(VUhom) ~ log(Area), dados)
R 4.0.2&gt; summary(fithom2)
```

```
## 
## Call:
## lm(formula = log(VUhom) ~ log(Area), data = dados)
## 
## Residuals:
##       Min        1Q    Median        3Q       Max 
## -0.099541 -0.040705  0.002982  0.037372  0.108366 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  7.351000   0.054459   135.0   &lt;2e-16 ***
## log(Area)   -0.250823   0.007085   -35.4   &lt;2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 0.05023 on 98 degrees of freedom
## Multiple R-squared:  0.9275,	Adjusted R-squared:  0.9267 
## F-statistic:  1253 on 1 and 98 DF,  p-value: &lt; 2.2e-16
```
]

.pull-right[


```r
R 4.0.2&gt; sd(dados$VU)/mean(dados$VU)
```

```
## [1] 0.2179645
```


```r
R 4.0.2&gt; sd(dados$VUhom)/mean(dados$VUhom)
```

```
## [1] 0.2005692
```
]

---
# Opção: Aplicação prévia do Fator Oferta

&lt;img src="images/unnamed-chunk-24-1.svg" style="display: block; margin: auto;" /&gt;

---
# Diagnóstico modelo com dados homogeneizados

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="images/fit2homDiagnostics-1.svg" alt="Modelo com dados homogeneizados. Dados lognormais." width="38%" /&gt;&lt;img src="images/fit2homDiagnostics-2.svg" alt="Modelo com dados homogeneizados. Dados lognormais." width="38%" /&gt;&lt;img src="images/fit2homDiagnostics-3.svg" alt="Modelo com dados homogeneizados. Dados lognormais." width="38%" /&gt;&lt;img src="images/fit2homDiagnostics-4.svg" alt="Modelo com dados homogeneizados. Dados lognormais." width="38%" /&gt;
&lt;p class="caption"&gt;Modelo com dados homogeneizados. Dados lognormais.&lt;/p&gt;
&lt;/div&gt;

---
# Resumo dos modelos

&lt;table style="border-collapse:collapse; border:none;"&gt;
&lt;tr&gt;
&lt;th style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm;  text-align:left; "&gt;&amp;nbsp;&lt;/th&gt;
&lt;th colspan="3" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; "&gt;log(VU)&lt;/th&gt;
&lt;th colspan="3" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; "&gt;log(VUhom)&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  text-align:left; "&gt;Predictors&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  "&gt;Estimates&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  "&gt;CI&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  "&gt;p&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  "&gt;Estimates&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  "&gt;CI&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  col7"&gt;p&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; "&gt;(Intercept)&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;7.51&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;7.40&amp;nbsp;&amp;ndash;&amp;nbsp;7.61&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&lt;strong&gt;&amp;lt;0.001&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;7.35&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;7.24&amp;nbsp;&amp;ndash;&amp;nbsp;7.46&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7"&gt;&lt;strong&gt;&amp;lt;0.001&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; "&gt;Area [log]&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;0.25&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;0.26&amp;nbsp;&amp;ndash;&amp;nbsp;-0.24&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&lt;strong&gt;&amp;lt;0.001&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;0.25&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;0.26&amp;nbsp;&amp;ndash;&amp;nbsp;-0.24&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7"&gt;&lt;strong&gt;&amp;lt;0.001&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; "&gt;Fonte [Venda]&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;0.15&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;0.16&amp;nbsp;&amp;ndash;&amp;nbsp;-0.13&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&lt;strong&gt;&amp;lt;0.001&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7"&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm; border-top:1px solid;"&gt;Observations&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="3"&gt;100&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="3"&gt;100&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;"&gt;R&lt;sup&gt;2&lt;/sup&gt; / R&lt;sup&gt;2&lt;/sup&gt; adjusted&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="3"&gt;0.940 / 0.938&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="3"&gt;0.927 / 0.927&lt;/td&gt;
&lt;/tr&gt;

&lt;/table&gt;

---
# Previsão de valores

.pull-left[


```r
R 4.0.2&gt; new250 &lt;- 
   data.frame(Area = 250, Fonte = "Venda")
R 4.0.2&gt; exp(predict(fit2, newdata = new250,
         interval = "confidence", level = .80))
```

```
##        fit     lwr     upr
## 1 393.8706 385.454 402.471
```



```r
R 4.0.2&gt; exp(predict(fithom2, newdata = new250,
         interval = "confidence", level = .80))
```

```
##        fit      lwr      upr
## 1 389.9781 382.0481 398.0727
```
]

.pull-right[


```r
R 4.0.2&gt; new5000 &lt;- 
   data.frame(Area = 5000, Fonte = "Venda")
R 4.0.2&gt; exp(predict(fit2, newdata = new5000,
         interval = "confidence", level = .80))
```

```
##        fit      lwr      upr
## 1 185.6678 183.4194 187.9437
```


```r
R 4.0.2&gt; exp(predict(fithom2, newdata = new5000,
         interval = "confidence", level = .80))
```

```
##        fit      lwr      upr
## 1 183.9551 182.0866 185.8428
```

]

---
# Outras transformações

`$$VU = (1-0,15\cdot Fonte)(50 - 0,01\cdot Area + \varepsilon)^2$$`


```r
R 4.0.2&gt; set.seed(2)
R 4.0.2&gt; area &lt;- runif(100, min = 250, max = 5000)
R 4.0.2&gt; venda &lt;- rbinom(100, 1, .5)
R 4.0.2&gt; sqrtvu &lt;- 70 - .01*area + rnorm(100, mean = 0, sd = 2)
R 4.0.2&gt; vu &lt;- (1-.15*venda)*sqrtvu^2
R 4.0.2&gt; dados &lt;- data.frame(VU = vu, Area = area, 
                  Fonte = factor(venda, labels = c("Oferta", "Venda")))
```

---
# Outras transformações: análise exploratória

&lt;img src="images/unnamed-chunk-31-1.svg" style="display: block; margin: auto;" /&gt;

---
# Modelo mal especificado


```r
R 4.0.2&gt; fit3 &lt;- lm(sqrt(VU) ~ Area + Fonte, data = dados)
R 4.0.2&gt; summary(fit3)
```

```
## 
## Call:
## lm(formula = sqrt(VU) ~ Area + Fonte, data = dados)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -4.0834 -1.8384  0.0321  1.4690  4.5725 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 69.086281   0.461259 149.777  &lt; 2e-16 ***
## Area        -0.009660   0.000143 -67.544  &lt; 2e-16 ***
## FonteVenda  -3.260870   0.404871  -8.054 2.06e-12 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 2.018 on 97 degrees of freedom
## Multiple R-squared:  0.9794,	Adjusted R-squared:  0.979 
## F-statistic:  2311 on 2 and 97 DF,  p-value: &lt; 2.2e-16
```

---
# Modelo mal especificado

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="images/fit3Diagnostics-1.svg" alt="Modelo mal especificado. Fator oferta." width="38%" /&gt;&lt;img src="images/fit3Diagnostics-2.svg" alt="Modelo mal especificado. Fator oferta." width="38%" /&gt;&lt;img src="images/fit3Diagnostics-3.svg" alt="Modelo mal especificado. Fator oferta." width="38%" /&gt;&lt;img src="images/fit3Diagnostics-4.svg" alt="Modelo mal especificado. Fator oferta." width="38%" /&gt;
&lt;p class="caption"&gt;Modelo mal especificado. Fator oferta.&lt;/p&gt;
&lt;/div&gt;

---
# Modelo correto


```r
R 4.0.2&gt; fit4 &lt;- lm(sqrt(VU) ~ Area*Fonte, data = dados)
R 4.0.2&gt; summary(fit4)
```

```
## 
## Call:
## lm(formula = sqrt(VU) ~ Area * Fonte, data = dados)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -4.0144 -1.5075  0.2621  1.3703  4.3139 
## 
## Coefficients:
##                   Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)     70.1570222  0.5412342 129.624  &lt; 2e-16 ***
## Area            -0.0100733  0.0001830 -55.054  &lt; 2e-16 ***
## FonteVenda      -5.6434584  0.8042935  -7.017 3.21e-10 ***
## Area:FonteVenda  0.0009221  0.0002733   3.373  0.00107 ** 
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 1.918 on 96 degrees of freedom
## Multiple R-squared:  0.9816,	Adjusted R-squared:  0.981 
## F-statistic:  1709 on 3 and 96 DF,  p-value: &lt; 2.2e-16
```

---
# Modelo correto

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="images/rightModel3-1.svg" alt="Fator oferta com transformação raiz quadrada. Modelo especificado corretamente." width="50%" /&gt;&lt;img src="images/rightModel3-2.svg" alt="Fator oferta com transformação raiz quadrada. Modelo especificado corretamente." width="50%" /&gt;
&lt;p class="caption"&gt;Fator oferta com transformação raiz quadrada. Modelo especificado corretamente.&lt;/p&gt;
&lt;/div&gt;

---
# Modelo correto

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="images/fit4Diagnostics-1.svg" alt="Modelo mal especificado. Fator oferta." width="38%" /&gt;&lt;img src="images/fit4Diagnostics-2.svg" alt="Modelo mal especificado. Fator oferta." width="38%" /&gt;&lt;img src="images/fit4Diagnostics-3.svg" alt="Modelo mal especificado. Fator oferta." width="38%" /&gt;&lt;img src="images/fit4Diagnostics-4.svg" alt="Modelo mal especificado. Fator oferta." width="38%" /&gt;
&lt;p class="caption"&gt;Modelo mal especificado. Fator oferta.&lt;/p&gt;
&lt;/div&gt;

---
# Opção: aplicação prévia do fator oferta

.pull-left[


```r
R 4.0.2&gt; dados &lt;- within(dados, 
                 VUhom &lt;- ifelse(Fonte == "Venda", 
                                 VU, .85*VU))
R 4.0.2&gt; fithom3 &lt;- lm(sqrt(VUhom) ~ Area, dados)
R 4.0.2&gt; summary(fithom3)
```

```
## 
## Call:
## lm(formula = sqrt(VUhom) ~ Area, data = dados)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -3.9257 -1.5261  0.1699  1.3447  3.8428 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 64.6088206  0.3811754  169.50   &lt;2e-16 ***
## Area        -0.0092266  0.0001294  -71.29   &lt;2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 1.826 on 98 degrees of freedom
## Multiple R-squared:  0.9811,	Adjusted R-squared:  0.9809 
## F-statistic:  5082 on 1 and 98 DF,  p-value: &lt; 2.2e-16
```

]

.pull-right[

* Coeficiente de variação dos dados crus:


```r
R 4.0.2&gt; sd(dados$VU)/mean(dados$VU)
```

```
## [1] 0.5861128
```

* Coeficiente de variação dos dados homogeneizados:


```r
R 4.0.2&gt; sd(dados$VUhom)/mean(dados$VUhom)
```

```
## [1] 0.5777287
```

]

---
# Opção: aplicação prévia do fator oferta

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="images/dadosHomogeneizados3-1.svg" alt="Dados homogeneizados."  /&gt;
&lt;p class="caption"&gt;Dados homogeneizados.&lt;/p&gt;
&lt;/div&gt;

---
# Resumo



&lt;table style="border-collapse:collapse; border:none;"&gt;
&lt;tr&gt;
&lt;th style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm;  text-align:left; "&gt;&amp;nbsp;&lt;/th&gt;
&lt;th colspan="3" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; "&gt;sqrt(VU)&lt;/th&gt;
&lt;th colspan="3" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; "&gt;sqrt(VU)&lt;/th&gt;
&lt;th colspan="3" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; "&gt;sqrt(VUhom)&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  text-align:left; "&gt;Predictors&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  "&gt;Estimates&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  "&gt;CI&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  "&gt;p&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  "&gt;Estimates&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  "&gt;CI&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  col7"&gt;p&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  col8"&gt;Estimates&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  col9"&gt;CI&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  0"&gt;p&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; "&gt;(Intercept)&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;69.086&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;68.171&amp;nbsp;&amp;ndash;&amp;nbsp;70.002&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&lt;strong&gt;&amp;lt;0.001&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;70.157&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;69.083&amp;nbsp;&amp;ndash;&amp;nbsp;71.231&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7"&gt;&lt;strong&gt;&amp;lt;0.001&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col8"&gt;64.609&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col9"&gt;63.852&amp;nbsp;&amp;ndash;&amp;nbsp;65.365&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  0"&gt;&lt;strong&gt;&amp;lt;0.001&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; "&gt;Area&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;0.010&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;0.010&amp;nbsp;&amp;ndash;&amp;nbsp;-0.009&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&lt;strong&gt;&amp;lt;0.001&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;0.010&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;0.010&amp;nbsp;&amp;ndash;&amp;nbsp;-0.010&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7"&gt;&lt;strong&gt;&amp;lt;0.001&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col8"&gt;&amp;#45;0.009&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col9"&gt;&amp;#45;0.009&amp;nbsp;&amp;ndash;&amp;nbsp;-0.009&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  0"&gt;&lt;strong&gt;&amp;lt;0.001&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; "&gt;Fonte [Venda]&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;3.261&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;4.064&amp;nbsp;&amp;ndash;&amp;nbsp;-2.457&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&lt;strong&gt;&amp;lt;0.001&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;5.643&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;7.240&amp;nbsp;&amp;ndash;&amp;nbsp;-4.047&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7"&gt;&lt;strong&gt;&amp;lt;0.001&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col8"&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col9"&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  0"&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; "&gt;Area * Fonte [Venda]&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;0.001&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;0.000&amp;nbsp;&amp;ndash;&amp;nbsp;0.001&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7"&gt;&lt;strong&gt;0.001&lt;/strong&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col8"&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col9"&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  0"&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm; border-top:1px solid;"&gt;Observations&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="3"&gt;100&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="3"&gt;100&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="3"&gt;100&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;"&gt;R&lt;sup&gt;2&lt;/sup&gt; / R&lt;sup&gt;2&lt;/sup&gt; adjusted&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="3"&gt;0.979 / 0.979&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="3"&gt;0.982 / 0.981&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="3"&gt;0.981 / 0.981&lt;/td&gt;
&lt;/tr&gt;

&lt;/table&gt;

---
# Previsão de valores

.pull-left[


```r
R 4.0.2&gt; new250 &lt;- 
   data.frame(Area = 250, Fonte = "Venda")
R 4.0.2&gt; predict(fit3, newdata = new250,
         interval = "confidence", level = .80)^2
```

```
##        fit      lwr      upr
## 1 4020.876 3948.145 4094.271
```


```r
R 4.0.2&gt; predict(fit4, newdata = new250,
         interval = "confidence", level = .80)^2
```

```
##        fit      lwr      upr
## 1 3872.045 3784.093 3961.007
```


```r
R 4.0.2&gt; predict(fithom3, newdata = new250,
         interval = "confidence", level = .80)^2
```

```
##        fit      lwr     upr
## 1 3881.562 3824.999 3938.54
```
]

.pull-right[


```r
R 4.0.2&gt; new5000 &lt;- 
   data.frame(Area = 5000, Fonte = "Venda")
R 4.0.2&gt; predict(fit3, newdata = new5000,
         interval = "confidence", level = .80)^2
```

```
##        fit      lwr     upr
## 1 307.1146 286.8096 328.114
```


```r
R 4.0.2&gt; predict(fit4, newdata = new5000,
         interval = "confidence", level = .80)^2
```

```
##        fit      lwr      upr
## 1 351.8401 324.9102 379.8422
```


```r
R 4.0.2&gt; predict(fithom3, newdata = new5000,
         interval = "confidence", level = .80)^2
```

```
##       fit      lwr      upr
## 1 341.363 324.3225 358.8399
```

]

---
# Efeitos do Fator Oferta sobre IC e IP



---
class: inverse, center, middle

# Conclusão

---
# Conclusão

* A modelagem e aplicação do Fator Oferta deve ser feita com cuidado. Deve-se
ter em mente que assumir que `\(V_{venda} = \lambda V_{oferta}\)` é apenas uma 
hipótese que deve ser verificada

* A análise exploratória é fundamental para a percepção da realidade do mercado
antes da modelagem

* A modelagem deve levar em conta a hipótese feita para o fator oferta

* A má especificação do fator oferta pode levar a modelos tendenciosos, que 
podem produzir más previsões de valores, especialmente nos extremos dos dados

* O fator oferta também influencia no cômputo dos intervalos de confiança e
predição. É um erro comparar valores de mercado com intervalos obtidos com 
dados de oferta antes de um tratamento destes intervalos.
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
